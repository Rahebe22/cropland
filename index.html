<!DOCTYPE html>
<html>
<head>
    <title>PMTiles OpenLayers Vector with MapTiler Hybrid Base Map</title>
    <meta charset="utf-8"/>
    <script src="https://cdn.jsdelivr.net/npm/ol@7.3.0/dist/ol.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@7.3.0/ol.css">
    <script src="https://unpkg.com/ol-pmtiles@0.3.0/dist/olpmtiles.js"></script>
    <style>
        body, #map {
            height: 100vh;
            margin: 0;
        }
        .country-button, .year-dropdown {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 1000;
            padding: 5px 10px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 5px;
        }
        .year-dropdown {
            top: 60px;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script type="text/javascript">
        const map = new ol.Map({
            target: 'map',
            layers: [
                new ol.layer.Tile({
                    source: new ol.source.XYZ({
                        url: 'https://api.maptiler.com/maps/hybrid/{z}/{x}/{y}.jpg?key=0rXt9evmwC5e2EW3sauy',
                        attributions: '© MapTiler © OpenStreetMap contributors',
                        maxZoom: 20
                    })
                })
            ],
            view: new ol.View({
                center: ol.proj.fromLonLat([3.3, 7.85]),
                zoom: 5
            })
        });

        // Define regions and their view parameters
        const regions = {
            'Congo': { center: ol.proj.fromLonLat([15.8277, -0.2280]), zoom: 7, pmtilesUrl: "https://raw.githack.com/grace-du/crop-land-maps/main/congo.pmtiles" },
            'Ghana': { center: ol.proj.fromLonLat([-1.0232, 7.9465]), zoom: 7, pmtilesUrl: "https://github.com/Rahebe22/cropland/blob/main/ghana/aoi10_boundarymerge.pmtiles" }
        };

        // Function to add vector layer based on selected country and year
        function addVectorLayer(country, year) {
            // Remove existing vector layer if any
            const existingLayer = map.getLayers().getArray().find(layer => layer.get('id') === 'vectorLayer');
            if (existingLayer) {
                map.removeLayer(existingLayer);
            }

            const region = regions[country];
            if (!region) return;

            // Add new vector layer for selected country and year
            const vectorLayer = new ol.layer.VectorTile({
                source: new olpmtiles.PMTilesVectorSource({
                    url: region.pmtilesUrl.replace('main', year) // Assuming the URL structure includes the year
                }),
                style: new ol.style.Style({
                    stroke: new ol.style.Stroke({
                        color: 'yellow',
                        width: 2,
                    })
                }),
                id: 'vectorLayer'
            });
            map.addLayer(vectorLayer);

            // Zoom to the selected region
            map.getView().animate({
                center: region.center,
                zoom: region.zoom,
                duration: 1000 // Smooth transition animation (1 second)
            });
        }

        // Create dropdowns for selecting country, version, and year
        const countrySelect = document.createElement('select');
        countrySelect.className = 'country-button';
        Object.keys(regions).forEach(country => {
            const option = document.createElement('option');
            option.value = country;
            option.text = country;
            countrySelect.appendChild(option);
        });

        const yearSelect = document.createElement('select');
        yearSelect.className = 'year-dropdown';
        ['
